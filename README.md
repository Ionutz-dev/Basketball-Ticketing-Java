# ğŸ€ Basketball Ticket Sales System (Java + JavaFX + Networking)

This project is a **JavaFX-based multi-client application** for managing basketball ticket sales with **real-time updates**, **server-client communication** over both a **custom RPC protocol** and **gRPC**, and **concurrent user support**.

## ğŸ“ Project Structure

```
JavaApp/
â”‚
â”œâ”€â”€ Client/                          # JavaFX Client (RPC-based)
â”‚   â”œâ”€â”€ src/main/java/app/client/gui/
â”‚   â”‚   â”œâ”€â”€ LoginController.java
â”‚   â”‚   â”œâ”€â”€ MainController.java
â”‚   â”‚   â”œâ”€â”€ SceneManager.java
â”‚   â”‚   â”œâ”€â”€ Util.java
â”‚   â”œâ”€â”€ src/main/java/app/client/
â”‚   â”‚   â””â”€â”€ StartRpcClient.java
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â”œâ”€â”€ LoginWindow.fxml
â”‚   â”‚   â”œâ”€â”€ MainWindow.fxml
â”‚   â”‚   â””â”€â”€ log4j2.xml               # Client logging configuration
â”‚
â”œâ”€â”€ GrpcClient/                      # JavaFX Client (gRPC-based)
â”‚   â”œâ”€â”€ src/main/java/app/grpcclient/gui/
â”‚   â”‚   â”œâ”€â”€ GrpcLoginController.java
â”‚   â”‚   â”œâ”€â”€ GrpcMainController.java
â”‚   â”‚   â”œâ”€â”€ SceneManager.java
â”‚   â”‚   â””â”€â”€ Util.java
â”‚   â”œâ”€â”€ src/main/java/app/grpcclient/
â”‚   â”‚   â””â”€â”€ GrpcStartClient.java
â”‚   â”œâ”€â”€ src/main/proto/
â”‚   â”‚   â””â”€â”€ ticket.proto
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â”œâ”€â”€ GrpcLoginWindow.fxml
â”‚   â”‚   â”œâ”€â”€ GrpcMainWindow.fxml
â”‚   â”‚   â””â”€â”€ log4j2.xml               # gRPC Client logging configuration
â”‚
â”œâ”€â”€ Server/                          # Server module
â”‚   â”œâ”€â”€ src/main/java/app/server/
â”‚   â”‚   â”œâ”€â”€ BasketballServicesImpl.java
â”‚   â”‚   â”œâ”€â”€ StartRpcServer.java
â”‚   â”‚   â””â”€â”€ StartHibernateRpcServer.java  # Hibernate-based server launcher
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â””â”€â”€ appserver.properties
â”‚
â”œâ”€â”€ Model/                           # Shared domain models
â”‚   â””â”€â”€ src/main/java/app/model/
â”‚       â”œâ”€â”€ Match.java
â”‚       â”œâ”€â”€ Ticket.java
â”‚       â”œâ”€â”€ User.java
â”‚       â””â”€â”€ hibernate/               # Hibernate entity models
â”‚           â”œâ”€â”€ HibernateMatch.java
â”‚           â”œâ”€â”€ HibernateTicket.java
â”‚           â””â”€â”€ HibernateUser.java
â”‚
â”œâ”€â”€ Networking/                      # RPC Protocol and Networking
â”‚   â”œâ”€â”€ src/main/java/app/network/dto/
â”‚   â”‚   â”œâ”€â”€ DTOUtils.java
â”‚   â”‚   â”œâ”€â”€ MatchDTO.java
â”‚   â”‚   â”œâ”€â”€ TicketDTO.java
â”‚   â”‚   â””â”€â”€ UserDTO.java
â”‚   â”œâ”€â”€ src/main/java/app/network/rpcprotocol/
â”‚   â”‚   â”œâ”€â”€ BasketballClientRpcReflectionWorker.java
â”‚   â”‚   â”œâ”€â”€ BasketballServicesRpcProxy.java
â”‚   â”‚   â”œâ”€â”€ Request.java
â”‚   â”‚   â”œâ”€â”€ RequestType.java
â”‚   â”‚   â”œâ”€â”€ Response.java
â”‚   â”‚   â””â”€â”€ ResponseType.java
â”‚   â”œâ”€â”€ src/main/java/app/network/utils/
â”‚   â”‚   â”œâ”€â”€ AbsConcurrentServer.java
â”‚   â”‚   â”œâ”€â”€ AbstractServer.java
â”‚   â”‚   â”œâ”€â”€ BasketballRpcConcurrentServer.java
â”‚   â”‚   â””â”€â”€ ServerException.java
â”‚   â””â”€â”€ src/main/resources/
â”‚       â””â”€â”€ log4j2.xml               # Networking logging configuration
â”‚
â”œâ”€â”€ Persistence/                     # Database repositories
â”‚   â”œâ”€â”€ src/main/java/app/repository/
â”‚   â”‚   â”œâ”€â”€ IMatchRepository.java
â”‚   â”‚   â”œâ”€â”€ ITicketRepository.java
â”‚   â”‚   â”œâ”€â”€ IUserRepository.java
â”‚   â”‚   â”œâ”€â”€ jdbc/                    # JDBC implementations
â”‚   â”‚   â”‚   â”œâ”€â”€ JdbcUtils.java
â”‚   â”‚   â”‚   â”œâ”€â”€ MatchRepositoryJdbc.java
â”‚   â”‚   â”‚   â”œâ”€â”€ TicketRepositoryJdbc.java
â”‚   â”‚   â”‚   â””â”€â”€ UserRepositoryJdbc.java
â”‚   â”‚   â””â”€â”€ hibernate/               # Hibernate implementations
â”‚   â”‚       â”œâ”€â”€ HibernateUtils.java
â”‚   â”‚       â”œâ”€â”€ MatchRepositoryHibernate.java
â”‚   â”‚       â”œâ”€â”€ TicketRepositoryHibernate.java
â”‚   â”‚       â””â”€â”€ UserRepositoryHibernate.java
â”‚   â””â”€â”€ src/main/resources/
â”‚       â””â”€â”€ log4j2.xml               # Persistence logging configuration
â”‚
â”œâ”€â”€ Services/                        # Service interfaces
â”‚   â”œâ”€â”€ src/main/java/app/services/
â”‚   â”‚   â”œâ”€â”€ BasketballException.java
â”‚   â”‚   â”œâ”€â”€ IBasketballObserver.java
â”‚   â”‚   â””â”€â”€ IBasketballServices.java
â”‚   â””â”€â”€ src/main/resources/
â”‚       â””â”€â”€ log4j2.xml               # Services logging configuration
â”‚
â”œâ”€â”€ logs/                            # Logs generated by the application
â”‚   â”œâ”€â”€ client.log                   # Client module logs
â”‚   â”œâ”€â”€ grpcclient.log               # gRPC Client module logs
â”‚   â”œâ”€â”€ model.log                    # Model module logs
â”‚   â”œâ”€â”€ networking.log               # Networking module logs
â”‚   â”œâ”€â”€ persistence.log              # Persistence module logs
â”‚   â””â”€â”€ services.log                 # Services module logs
â”‚
â”œâ”€â”€ build.gradle                     # Gradle multi-project build configuration
â”œâ”€â”€ settings.gradle                  # Gradle project settings
â””â”€â”€ README.md                        # This file
```

## âœ¨ Features

* ğŸ”’ **Login / Logout** with server authentication.
* ğŸ“‹ **Real-Time Match Updates**:
  * Live ticket availability across all clients.
  * Supports both socket and gRPC updates.
* ğŸŸï¸ **Ticket Selling** with customer and seat count input.
* ğŸš€ **Dual Communication Protocols**:
  * Sockets (custom RPC protocol)
  * gRPC (with server-streaming using `WatchMatches`)
* ğŸ–¥ï¸ **JavaFX GUI** with separate views for socket and gRPC clients.
* ğŸ”„ **Automatic logout** and cleanup on window close.
* ğŸ§ª **gRPC Module (`GrpcClient`)** fully compatible with the C# gRPC server.
* ğŸ“š **Modular Gradle Project** with clear domain separation.
* ğŸ›¢ï¸ **Dual Persistence Options**:
  * SQLite JDBC direct implementation
  * Hibernate ORM with entity mapping
* ğŸ“Š **Comprehensive Logging** with Log4j2:
  * Module-specific log files
  * Configurable log levels
  * Detailed debugging information
  * Rolling file appenders

## ğŸš€ How to Run

### 1. Start One of the Servers

For JDBC-based persistence:
```bash
cd Server
./gradlew run
```

For Hibernate ORM-based persistence:
```bash
cd Server
./gradlew run --args="hibernate"
```

### 2. Start the RPC Client (Socket)

```bash
cd Client
./gradlew run
```

### 3. Start the gRPC Client (JavaFX + gRPC)

```bash
cd GrpcClient
./gradlew run
```

> You can run multiple clients (RPC or gRPC) at the same time.

## ğŸ“‹ Persistence Options

The application supports two different persistence mechanisms:

1. **JDBC Repository**: Direct SQL operations through JDBC
  - Faster for simple operations
  - Lighter memory footprint
  - More control over SQL statements

2. **Hibernate ORM**: Object-Relational Mapping
  - Automatic SQL generation
  - Entity relationship management
  - Session-based transaction handling
  - Schema creation/validation

Both implementations use the same repository interfaces, allowing seamless switching between the two.

## ğŸ“Š Logging System

The application uses a comprehensive logging system with Log4j2:

* **Module-Based Logging**: Each module has its own log configuration and output file
* **Multiple Log Levels**:
  * `TRACE`: Fine-grained debugging details
  * `DEBUG`: Detailed debugging information
  * `INFO`: General application progress
  * `WARN`: Potential issues or unexpected behaviors
  * `ERROR`: Error conditions and exceptions
* **Multiple Appenders**:
  * Console output for immediate feedback
  * Rolling file appenders for persistent logs
* **Performance Optimized**: Asynchronous logging where appropriate
* **Security Aware**: Password masking and sensitive data protection

Log files are stored in the `logs/` directory, with module-specific files.

## ğŸ“Œ Homework Requirements Implemented

* âœ”ï¸ Modular Gradle multi-project setup.
* âœ”ï¸ JavaFX GUI (for both RPC and gRPC clients).
* âœ”ï¸ Real-time updates with both socket-based and gRPC communication.
* âœ”ï¸ Streaming gRPC with `WatchMatches()`.
* âœ”ï¸ Cross-platform compatibility (gRPC works with C# server).
* âœ”ï¸ **Dual persistence options** with JDBC and Hibernate ORM.
* âœ”ï¸ Comprehensive logging system via Log4j2.
* âœ”ï¸ Observer pattern and concurrent server handling.

## âš™ï¸ Technologies Used

* Java 21
* JavaFX 21
* Gradle (multi-module)
* SQLite via `sqlite-jdbc`
* Hibernate ORM 6.4.4
* gRPC + Protobuf
* TCP Sockets (custom protocol)
* Log4j2
* Java Concurrency APIs