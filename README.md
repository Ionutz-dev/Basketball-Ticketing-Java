# 🏀 Basketball Ticket Sales System (Java + JavaFX + Networking)

This project is a **JavaFX-based multi-client application** for managing basketball ticket sales with **real-time updates**, **server-client communication** over both a **custom RPC protocol** and **gRPC**, and **concurrent user support**.

## 📁 Project Structure

```
JavaApp/
│
├── Client/                          # JavaFX Client (RPC-based)
│   ├── src/main/java/app/client/gui/
│   │   ├── LoginController.java
│   │   ├── MainController.java
│   │   ├── SceneManager.java
│   │   ├── Util.java
│   ├── src/main/java/app/client/
│   │   └── StartRpcClient.java
│   ├── src/main/resources/
│   │   ├── LoginWindow.fxml
│   │   ├── MainWindow.fxml
│   │   └── log4j2.xml               # Client logging configuration
│
├── GrpcClient/                      # JavaFX Client (gRPC-based)
│   ├── src/main/java/app/grpcclient/gui/
│   │   ├── GrpcLoginController.java
│   │   ├── GrpcMainController.java
│   │   ├── SceneManager.java
│   │   └── Util.java
│   ├── src/main/java/app/grpcclient/
│   │   └── GrpcStartClient.java
│   ├── src/main/proto/
│   │   └── ticket.proto
│   ├── src/main/resources/
│   │   ├── GrpcLoginWindow.fxml
│   │   ├── GrpcMainWindow.fxml
│   │   └── log4j2.xml               # gRPC Client logging configuration
│
├── Server/                          # Server module
│   ├── src/main/java/app/server/
│   │   ├── BasketballServicesImpl.java
│   │   ├── StartRpcServer.java
│   │   └── StartHibernateRpcServer.java  # Hibernate-based server launcher
│   ├── src/main/resources/
│   │   └── appserver.properties
│
├── Model/                           # Shared domain models
│   └── src/main/java/app/model/
│       ├── Match.java
│       ├── Ticket.java
│       ├── User.java
│       └── hibernate/               # Hibernate entity models
│           ├── HibernateMatch.java
│           ├── HibernateTicket.java
│           └── HibernateUser.java
│
├── Networking/                      # RPC Protocol and Networking
│   ├── src/main/java/app/network/dto/
│   │   ├── DTOUtils.java
│   │   ├── MatchDTO.java
│   │   ├── TicketDTO.java
│   │   └── UserDTO.java
│   ├── src/main/java/app/network/rpcprotocol/
│   │   ├── BasketballClientRpcReflectionWorker.java
│   │   ├── BasketballServicesRpcProxy.java
│   │   ├── Request.java
│   │   ├── RequestType.java
│   │   ├── Response.java
│   │   └── ResponseType.java
│   ├── src/main/java/app/network/utils/
│   │   ├── AbsConcurrentServer.java
│   │   ├── AbstractServer.java
│   │   ├── BasketballRpcConcurrentServer.java
│   │   └── ServerException.java
│   └── src/main/resources/
│       └── log4j2.xml               # Networking logging configuration
│
├── Persistence/                     # Database repositories
│   ├── src/main/java/app/repository/
│   │   ├── IMatchRepository.java
│   │   ├── ITicketRepository.java
│   │   ├── IUserRepository.java
│   │   ├── jdbc/                    # JDBC implementations
│   │   │   ├── JdbcUtils.java
│   │   │   ├── MatchRepositoryJdbc.java
│   │   │   ├── TicketRepositoryJdbc.java
│   │   │   └── UserRepositoryJdbc.java
│   │   └── hibernate/               # Hibernate implementations
│   │       ├── HibernateUtils.java
│   │       ├── MatchRepositoryHibernate.java
│   │       ├── TicketRepositoryHibernate.java
│   │       └── UserRepositoryHibernate.java
│   └── src/main/resources/
│       └── log4j2.xml               # Persistence logging configuration
│
├── Services/                        # Service interfaces
│   ├── src/main/java/app/services/
│   │   ├── BasketballException.java
│   │   ├── IBasketballObserver.java
│   │   └── IBasketballServices.java
│   └── src/main/resources/
│       └── log4j2.xml               # Services logging configuration
│
├── logs/                            # Logs generated by the application
│   ├── client.log                   # Client module logs
│   ├── grpcclient.log               # gRPC Client module logs
│   ├── model.log                    # Model module logs
│   ├── networking.log               # Networking module logs
│   ├── persistence.log              # Persistence module logs
│   └── services.log                 # Services module logs
│
├── build.gradle                     # Gradle multi-project build configuration
├── settings.gradle                  # Gradle project settings
└── README.md                        # This file
```

## ✨ Features

* 🔒 **Login / Logout** with server authentication.
* 📋 **Real-Time Match Updates**:
  * Live ticket availability across all clients.
  * Supports both socket and gRPC updates.
* 🎟️ **Ticket Selling** with customer and seat count input.
* 🚀 **Dual Communication Protocols**:
  * Sockets (custom RPC protocol)
  * gRPC (with server-streaming using `WatchMatches`)
* 🖥️ **JavaFX GUI** with separate views for socket and gRPC clients.
* 🔄 **Automatic logout** and cleanup on window close.
* 🧪 **gRPC Module (`GrpcClient`)** fully compatible with the C# gRPC server.
* 📚 **Modular Gradle Project** with clear domain separation.
* 🛢️ **Dual Persistence Options**:
  * SQLite JDBC direct implementation
  * Hibernate ORM with entity mapping
* 📊 **Comprehensive Logging** with Log4j2:
  * Module-specific log files
  * Configurable log levels
  * Detailed debugging information
  * Rolling file appenders

## 🚀 How to Run

### 1. Start One of the Servers

For JDBC-based persistence:
```bash
cd Server
./gradlew run
```

For Hibernate ORM-based persistence:
```bash
cd Server
./gradlew run --args="hibernate"
```

### 2. Start the RPC Client (Socket)

```bash
cd Client
./gradlew run
```

### 3. Start the gRPC Client (JavaFX + gRPC)

```bash
cd GrpcClient
./gradlew run
```

> You can run multiple clients (RPC or gRPC) at the same time.

## 📋 Persistence Options

The application supports two different persistence mechanisms:

1. **JDBC Repository**: Direct SQL operations through JDBC
  - Faster for simple operations
  - Lighter memory footprint
  - More control over SQL statements

2. **Hibernate ORM**: Object-Relational Mapping
  - Automatic SQL generation
  - Entity relationship management
  - Session-based transaction handling
  - Schema creation/validation

Both implementations use the same repository interfaces, allowing seamless switching between the two.

## 📊 Logging System

The application uses a comprehensive logging system with Log4j2:

* **Module-Based Logging**: Each module has its own log configuration and output file
* **Multiple Log Levels**:
  * `TRACE`: Fine-grained debugging details
  * `DEBUG`: Detailed debugging information
  * `INFO`: General application progress
  * `WARN`: Potential issues or unexpected behaviors
  * `ERROR`: Error conditions and exceptions
* **Multiple Appenders**:
  * Console output for immediate feedback
  * Rolling file appenders for persistent logs
* **Performance Optimized**: Asynchronous logging where appropriate
* **Security Aware**: Password masking and sensitive data protection

Log files are stored in the `logs/` directory, with module-specific files.

## 📌 Homework Requirements Implemented

* ✔️ Modular Gradle multi-project setup.
* ✔️ JavaFX GUI (for both RPC and gRPC clients).
* ✔️ Real-time updates with both socket-based and gRPC communication.
* ✔️ Streaming gRPC with `WatchMatches()`.
* ✔️ Cross-platform compatibility (gRPC works with C# server).
* ✔️ **Dual persistence options** with JDBC and Hibernate ORM.
* ✔️ Comprehensive logging system via Log4j2.
* ✔️ Observer pattern and concurrent server handling.

## ⚙️ Technologies Used

* Java 21
* JavaFX 21
* Gradle (multi-module)
* SQLite via `sqlite-jdbc`
* Hibernate ORM 6.4.4
* gRPC + Protobuf
* TCP Sockets (custom protocol)
* Log4j2
* Java Concurrency APIs